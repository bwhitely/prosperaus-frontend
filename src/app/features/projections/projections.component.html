<div class="page-header">
  <div class="page-header__content">
    <h1>Net Worth Projection</h1>
    <p class="subtitle">Project your wealth growth over time with Australian tax and super rules</p>
  </div>
  <div class="page-header__actions">
    <button mat-stroked-button (click)="openSaveForm()">
      <mat-icon>save</mat-icon>
      Save Scenario
    </button>
  </div>
</div>

@if (error()) {
  <div class="alert alert--error">
    <span>{{ error() }}</span>
    <button mat-icon-button (click)="error.set(null)">
      <mat-icon>close</mat-icon>
    </button>
  </div>
}

<div class="projections-layout">
  <!-- Input Form -->
  <div class="inputs-section">
    <form [formGroup]="form">
      <mat-accordion multi>
        <!-- Personal Details -->
        <mat-expansion-panel [expanded]="isSectionExpanded('personal')" (opened)="setSectionExpanded('personal', true)" (closed)="setSectionExpanded('personal', false)">
          <mat-expansion-panel-header>
            <mat-panel-title>Personal Details</mat-panel-title>
          </mat-expansion-panel-header>

          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Current Age</mat-label>
              <input matInput type="number" formControlName="currentAge" min="18" max="100">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Target Retirement Age</mat-label>
              <input matInput type="number" formControlName="targetRetirementAge" min="18" max="100">
            </mat-form-field>
          </div>
          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Projection Years</mat-label>
              <input matInput type="number" formControlName="projectionYears" min="1" max="50">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>State</mat-label>
              <mat-select formControlName="stateOfResidence">
                @for (state of stateOptions; track state) {
                  <mat-option [value]="state">{{ state }}</mat-option>
                }
              </mat-select>
            </mat-form-field>
          </div>
        </mat-expansion-panel>

        <!-- Income Sources -->
        <mat-expansion-panel [expanded]="isSectionExpanded('income')" (opened)="setSectionExpanded('income', true)" (closed)="setSectionExpanded('income', false)">
          <mat-expansion-panel-header>
            <mat-panel-title>Income Sources</mat-panel-title>
          </mat-expansion-panel-header>

          <div formArrayName="incomeSources">
            @for (source of incomeSources.controls; track $index) {
              <div class="income-source" [formGroupName]="$index">
                <div class="form-row">
                  <mat-form-field appearance="outline">
                    <mat-label>Name</mat-label>
                    <input matInput formControlName="name">
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-label>Type</mat-label>
                    <mat-select formControlName="sourceType">
                      <mat-option value="salary">Salary</mat-option>
                      <mat-option value="dividends">Dividends</mat-option>
                      <mat-option value="rental">Rental</mat-option>
                      <mat-option value="business">Business</mat-option>
                      <mat-option value="other">Other</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="form-row form-row--with-action">
                  <mat-form-field appearance="outline">
                    <mat-label>Amount</mat-label>
                    <span matTextPrefix>$&nbsp;</span>
                    <input matInput type="number" formControlName="amount" min="0">
                  </mat-form-field>
                  <mat-form-field appearance="outline" class="form-field--small">
                    <mat-label>Growth %</mat-label>
                    <input matInput type="number" formControlName="annualGrowthRate" min="-10" max="20">
                  </mat-form-field>
                  <button mat-icon-button color="warn" type="button"
                          (click)="removeIncomeSource($index)"
                          [disabled]="incomeSources.length === 1"
                          matTooltip="Remove income source">
                    <mat-icon>delete</mat-icon>
                  </button>
                </div>
                <mat-form-field appearance="outline">
                  <mat-label>Frequency</mat-label>
                  <mat-select formControlName="frequency">
                    @for (freq of frequencyOptions; track freq.value) {
                      <mat-option [value]="freq.value">{{ freq.label }}</mat-option>
                    }
                  </mat-select>
                </mat-form-field>
              </div>
            }
          </div>
          <button mat-stroked-button type="button" (click)="addIncomeSource()">
            <mat-icon>add</mat-icon>
            Add Income Source
          </button>
        </mat-expansion-panel>

        <!-- Superannuation -->
        <mat-expansion-panel [expanded]="isSectionExpanded('super')" (opened)="setSectionExpanded('super', true)" (closed)="setSectionExpanded('super', false)">
          <mat-expansion-panel-header>
            <mat-panel-title>Superannuation</mat-panel-title>
          </mat-expansion-panel-header>

          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Current Balance</mat-label>
              <span matTextPrefix>$&nbsp;</span>
              <input matInput type="number" formControlName="superBalance" min="0">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Growth Rate</mat-label>
              <input matInput type="number" formControlName="superGrowthRate" min="0" max="20">
              <span matTextSuffix>&nbsp;%</span>
            </mat-form-field>
          </div>
          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>SG Rate</mat-label>
              <input matInput type="number" formControlName="sgRate" min="0" max="15">
              <span matTextSuffix>&nbsp;%</span>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Salary Sacrifice ($/yr)</mat-label>
              <span matTextPrefix>$&nbsp;</span>
              <input matInput type="number" formControlName="salarySacrifice" min="0">
            </mat-form-field>
          </div>
          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Employer Match</mat-label>
              <input matInput type="number" formControlName="employerMatch" min="0">
              <span matTextSuffix>&nbsp;%</span>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Preservation Age</mat-label>
              <input matInput type="number" formControlName="preservationAge" min="55" max="65">
            </mat-form-field>
          </div>
        </mat-expansion-panel>

        <!-- Property (PPOR) -->
        <mat-expansion-panel [expanded]="isSectionExpanded('ppor')" (opened)="setSectionExpanded('ppor', true)" (closed)="setSectionExpanded('ppor', false)">
          <mat-expansion-panel-header>
            <mat-panel-title>Home (PPOR)</mat-panel-title>
          </mat-expansion-panel-header>

          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Property Value</mat-label>
              <span matTextPrefix>$&nbsp;</span>
              <input matInput type="number" formControlName="pporValue" min="0">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Mortgage Balance</mat-label>
              <span matTextPrefix>$&nbsp;</span>
              <input matInput type="number" formControlName="pporMortgage" min="0">
            </mat-form-field>
          </div>
          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Interest Rate</mat-label>
              <input matInput type="number" formControlName="pporInterestRate" min="0" max="20" appTwoDecimal>
              <span matTextSuffix>&nbsp;%</span>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Offset Balance</mat-label>
              <span matTextPrefix>$&nbsp;</span>
              <input matInput type="number" formControlName="pporOffsetBalance" min="0">
            </mat-form-field>
          </div>
          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Growth Rate</mat-label>
              <input matInput type="number" formControlName="pporGrowthRate" min="0" max="15">
              <span matTextSuffix>&nbsp;%</span>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Remaining Term (years)</mat-label>
              <input matInput type="number" formControlName="pporRemainingTerm" min="1" max="30">
            </mat-form-field>
          </div>
          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Extra Repayments ($/yr)</mat-label>
              <span matTextPrefix>$&nbsp;</span>
              <input matInput type="number" formControlName="pporExtraRepayments" min="0">
            </mat-form-field>
          </div>
        </mat-expansion-panel>

        <!-- Shares/ETFs -->
        <mat-expansion-panel [expanded]="isSectionExpanded('shares')" (opened)="setSectionExpanded('shares', true)" (closed)="setSectionExpanded('shares', false)">
          <mat-expansion-panel-header>
            <mat-panel-title>Shares & ETFs</mat-panel-title>
          </mat-expansion-panel-header>

          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Current Value</mat-label>
              <span matTextPrefix>$&nbsp;</span>
              <input matInput type="number" formControlName="sharesValue" min="0">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Annual Contributions</mat-label>
              <span matTextPrefix>$&nbsp;</span>
              <input matInput type="number" formControlName="sharesAnnualContributions" min="0">
            </mat-form-field>
          </div>
          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Growth Rate</mat-label>
              <input matInput type="number" formControlName="sharesGrowthRate" min="-10" max="20">
              <span matTextSuffix>&nbsp;%</span>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Weighted MER</mat-label>
              <input matInput type="number" formControlName="sharesMer" min="0" max="3" step="0.01">
              <span matTextSuffix>&nbsp;%</span>
            </mat-form-field>
          </div>
          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Dividend Yield</mat-label>
              <input matInput type="number" formControlName="dividendYield" min="0" max="15">
              <span matTextSuffix>&nbsp;%</span>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Franking Rate</mat-label>
              <input matInput type="number" formControlName="frankingRate" min="0" max="100">
              <span matTextSuffix>&nbsp;%</span>
            </mat-form-field>
          </div>
        </mat-expansion-panel>

        <!-- Cash & Savings -->
        <mat-expansion-panel [expanded]="isSectionExpanded('cash')" (opened)="setSectionExpanded('cash', true)" (closed)="setSectionExpanded('cash', false)">
          <mat-expansion-panel-header>
            <mat-panel-title>Cash & Savings</mat-panel-title>
          </mat-expansion-panel-header>

          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Current Balance</mat-label>
              <span matTextPrefix>$&nbsp;</span>
              <input matInput type="number" formControlName="cashBalance" min="0">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Monthly Savings</mat-label>
              <span matTextPrefix>$&nbsp;</span>
              <input matInput type="number" formControlName="monthlySavings">
            </mat-form-field>
          </div>
          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Interest Rate</mat-label>
              <input matInput type="number" formControlName="cashInterestRate" min="0" max="10" appTwoDecimal>
              <span matTextSuffix>&nbsp;%</span>
            </mat-form-field>
          </div>
        </mat-expansion-panel>

        <!-- Expenses -->
        <mat-expansion-panel [expanded]="isSectionExpanded('expenses')" (opened)="setSectionExpanded('expenses', true)" (closed)="setSectionExpanded('expenses', false)">
          <mat-expansion-panel-header>
            <mat-panel-title>Expenses</mat-panel-title>
          </mat-expansion-panel-header>

          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Annual Expenses</mat-label>
              <span matTextPrefix>$&nbsp;</span>
              <input matInput type="number" formControlName="annualExpenses" min="0">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Inflation Rate</mat-label>
              <input matInput type="number" formControlName="inflationRate" min="0" max="10">
              <span matTextSuffix>&nbsp;%</span>
            </mat-form-field>
          </div>
        </mat-expansion-panel>

        <!-- Tax -->
        <mat-expansion-panel [expanded]="isSectionExpanded('tax')" (opened)="setSectionExpanded('tax', true)" (closed)="setSectionExpanded('tax', false)">
          <mat-expansion-panel-header>
            <mat-panel-title>Tax</mat-panel-title>
          </mat-expansion-panel-header>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Marginal Tax Rate</mat-label>
            <mat-select formControlName="marginalTaxRate">
              @for (bracket of taxBrackets; track bracket.rate) {
                <mat-option [value]="bracket.rate">{{ bracket.label }}</mat-option>
              }
            </mat-select>
          </mat-form-field>

          <mat-checkbox formControlName="includeFrankingCredits" color="primary">
            Include franking credit refunds
          </mat-checkbox>
        </mat-expansion-panel>
      </mat-accordion>
    </form>
  </div>

  <!-- Results -->
  <div class="results-section">
    @if (isLoading()) {
      <mat-card class="loading-card">
        <mat-card-content>
          <mat-spinner diameter="48"></mat-spinner>
          <p>Calculating projection...</p>
        </mat-card-content>
      </mat-card>
    }

    @if (result(); as r) {
      <!-- Summary Cards -->
      <div class="summary-cards">
        <mat-card class="summary-card">
          <mat-card-content>
            <mat-icon>account_balance</mat-icon>
            <span class="label">Current Net Worth</span>
            <span class="value">{{ formatCurrency(r.summary.currentNetWorth) }}</span>
          </mat-card-content>
        </mat-card>

        <mat-card class="summary-card summary-card--highlight">
          <mat-card-content>
            <mat-icon>trending_up</mat-icon>
            <span class="label">Projected Net Worth</span>
            <span class="value">{{ formatCurrency(r.summary.projectedNetWorth) }}</span>
            <span class="change positive">
              +{{ formatCurrency(r.summary.totalGrowth) }}
              ({{ (r.summary.percentageGrowth * 100) | number:'1.1-1' }}%)
            </span>
          </mat-card-content>
        </mat-card>

        <mat-card class="summary-card">
          <mat-card-content>
            <mat-icon>show_chart</mat-icon>
            <span class="label">Avg Annual Growth</span>
            <span class="value">{{ (r.summary.averageAnnualGrowthRate * 100) | number:'1.1-1' }}%</span>
          </mat-card-content>
        </mat-card>
      </div>

      <!-- Key Milestones -->
      <mat-card class="milestones-card">
        <mat-card-header>
          <mat-card-title>Key Milestones</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="milestones-grid">
            @for (milestone of keyMilestones(); track milestone.label) {
              <div class="milestone">
                <span class="milestone-label">{{ milestone.label }}</span>
                <span class="milestone-age">Age {{ milestone.age }}</span>
                <span class="milestone-years">({{ milestone.years }} years)</span>
              </div>
            }
          </div>
        </mat-card-content>
      </mat-card>

      <!-- FIRE Status -->
      <mat-card class="fire-status-card" [class.achievable]="r.milestones.fireAchievable">
        <mat-card-header>
          <mat-icon>{{ r.milestones.fireAchievable ? 'check_circle' : 'info' }}</mat-icon>
          <mat-card-title>Financial Independence</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>{{ r.milestones.fireStatus }}</p>
          @if (r.milestones.fireAchievable && r.milestones.netWorthAtFire) {
            <p class="fire-details">
              Net worth at FIRE: {{ formatCurrency(r.milestones.netWorthAtFire) }}
            </p>
          }
        </mat-card-content>
      </mat-card>

      <!-- Insights -->
      <mat-card class="insights-card">
        <mat-card-header>
          <mat-card-title>Insights</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <ul class="insights-list">
            @for (insight of r.insights; track insight) {
              <li>
                <mat-icon>lightbulb</mat-icon>
                <span>{{ insight }}</span>
              </li>
            }
          </ul>
        </mat-card-content>
      </mat-card>

      <!-- Net Worth Over Time Line Graph -->
      <mat-card class="graph-card">
        <mat-card-header>
          <mat-card-title>Net Worth Over Time</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          @if (graphData(); as graph) {
            <div class="graph-container">
              <svg
                [attr.viewBox]="'0 0 ' + graphDimensions.width + ' ' + graphDimensions.height"
                class="graph-svg"
                preserveAspectRatio="xMidYMid meet"
              >
                <!-- Gradient definition -->
                <defs>
                  <linearGradient id="areaGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#7c3aed;stop-opacity:0.3" />
                    <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:0.05" />
                  </linearGradient>
                </defs>

                <!-- Horizontal grid lines -->
                @for (line of graph.horizontalGridLines; track line.y) {
                  <line
                    [attr.x1]="line.x1"
                    [attr.y1]="line.y"
                    [attr.x2]="line.x2"
                    [attr.y2]="line.y"
                    class="graph-grid-line"
                  />
                }

                <!-- Y-axis labels -->
                @for (label of graph.yAxisLabels; track label.value) {
                  <text
                    [attr.x]="graphDimensions.padding.left - 10"
                    [attr.y]="label.y + 4"
                    class="graph-axis-label graph-axis-label--y"
                  >
                    {{ label.label }}
                  </text>
                }

                <!-- X-axis labels -->
                @for (label of graph.xAxisLabels; track label.year) {
                  <text
                    [attr.x]="label.x"
                    [attr.y]="graphDimensions.height - graphDimensions.padding.bottom + 25"
                    class="graph-axis-label graph-axis-label--x"
                  >
                    {{ label.label }}
                  </text>
                }

                <!-- Area fill -->
                <path
                  [attr.d]="graph.areaPath"
                  class="graph-area"
                />

                <!-- Line -->
                <path
                  [attr.d]="graph.pathPoints"
                  class="graph-line"
                />

                <!-- Data points -->
                @for (point of graph.dataPoints; track point.year) {
                  <g class="graph-point-group">
                    <circle
                      [attr.cx]="point.x"
                      [attr.cy]="point.y"
                      r="5"
                      class="graph-point"
                    >
                      <title>Year {{ point.year }} (Age {{ point.age }}): {{ formatCurrency(point.netWorth) }}</title>
                    </circle>
                  </g>
                }
              </svg>

              <!-- Legend / Key values -->
              <div class="graph-legend">
                <div class="graph-legend-item">
                  <span class="graph-legend-label">In 1 Year</span>
                  <span class="graph-legend-value">{{ formatCurrency(r.summary.netWorthIn1Year) }}</span>
                </div>
                <div class="graph-legend-item">
                  <span class="graph-legend-label">In 5 Years</span>
                  <span class="graph-legend-value">{{ formatCurrency(r.summary.netWorthIn5Years) }}</span>
                </div>
                <div class="graph-legend-item">
                  <span class="graph-legend-label">In 10 Years</span>
                  <span class="graph-legend-value">{{ formatCurrency(r.summary.netWorthIn10Years) }}</span>
                </div>
                <div class="graph-legend-item">
                  <span class="graph-legend-label">In 20 Years</span>
                  <span class="graph-legend-value">{{ formatCurrency(r.summary.netWorthIn20Years) }}</span>
                </div>
              </div>
            </div>
          }
        </mat-card-content>
      </mat-card>

      <!-- Asset Allocation -->
      <mat-card class="allocation-card">
        <mat-card-header>
          <mat-card-title>Asset Allocation at Retirement (Age {{ r.retirementAllocation.age }})</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="allocation-bars">
            <div class="allocation-bar">
              <span class="allocation-bar__label">Super</span>
              <div class="allocation-bar__track">
                <div class="allocation-bar__fill allocation-bar__fill--super"
                     [style.width.%]="r.retirementAllocation.superPercent"></div>
              </div>
              <span class="allocation-bar__value">{{ r.retirementAllocation.superPercent | number:'1.0-0' }}%</span>
            </div>
            <div class="allocation-bar">
              <span class="allocation-bar__label">Property</span>
              <div class="allocation-bar__track">
                <div class="allocation-bar__fill allocation-bar__fill--property"
                     [style.width.%]="r.retirementAllocation.propertyEquityPercent"></div>
              </div>
              <span class="allocation-bar__value">{{ r.retirementAllocation.propertyEquityPercent | number:'1.0-0' }}%</span>
            </div>
            <div class="allocation-bar">
              <span class="allocation-bar__label">Shares</span>
              <div class="allocation-bar__track">
                <div class="allocation-bar__fill allocation-bar__fill--shares"
                     [style.width.%]="r.retirementAllocation.sharesPercent"></div>
              </div>
              <span class="allocation-bar__value">{{ r.retirementAllocation.sharesPercent | number:'1.0-0' }}%</span>
            </div>
            <div class="allocation-bar">
              <span class="allocation-bar__label">Cash</span>
              <div class="allocation-bar__track">
                <div class="allocation-bar__fill allocation-bar__fill--cash"
                     [style.width.%]="r.retirementAllocation.cashPercent"></div>
              </div>
              <span class="allocation-bar__value">{{ r.retirementAllocation.cashPercent | number:'1.0-0' }}%</span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Year-by-Year Table -->
      <mat-card class="table-card">
        <mat-card-header>
          <mat-card-title>Year-by-Year Breakdown</mat-card-title>
          <button mat-stroked-button (click)="toggleFullTable()">
            {{ showFullTable() ? 'Show Key Years' : 'Show All Years' }}
          </button>
        </mat-card-header>
        <mat-card-content>
          <div class="table-container">
            <table class="projection-table">
              <thead>
                <tr>
                  <th>Year</th>
                  <th>Age</th>
                  <th class="text-right">Net Worth</th>
                  <th class="text-right">Super</th>
                  <th class="text-right">Property</th>
                  <th class="text-right">Shares</th>
                  <th class="text-right">Cash</th>
                </tr>
              </thead>
              <tbody>
                @for (year of getDisplayYears(); track year.year) {
                  <tr [class.milestone-row]="year.isMortgagePaidOff || year.isSuperAccessible || year.isRetired">
                    <td>{{ year.year }}</td>
                    <td>{{ year.age }}</td>
                    <td class="text-right mono">{{ formatCurrency(year.netWorth) }}</td>
                    <td class="text-right mono">{{ formatCurrency(year.superBalance) }}</td>
                    <td class="text-right mono">{{ formatCurrency(year.pporEquity) }}</td>
                    <td class="text-right mono">{{ formatCurrency(year.sharesValue) }}</td>
                    <td class="text-right mono">{{ formatCurrency(year.cashBalance) }}</td>
                  </tr>
                }
              </tbody>
            </table>
          </div>
        </mat-card-content>
      </mat-card>
    }
  </div>
</div>

<!-- Save Scenario Inline Form -->
@if (showSaveForm()) {
  <mat-card class="inline-form">
    <mat-card-header class="inline-form__header">
      <mat-card-title>Save Projection Scenario</mat-card-title>
    </mat-card-header>
    <mat-card-content class="inline-form__body">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Scenario Name</mat-label>
        <input matInput
               [value]="scenarioName()"
               (input)="scenarioName.set($any($event.target).value)"
               placeholder="e.g., Base Case, Aggressive Savings">
      </mat-form-field>
    </mat-card-content>
    <mat-card-actions align="end" class="inline-form__footer">
      <button mat-stroked-button (click)="closeSaveForm()">Cancel</button>
      <button mat-flat-button color="primary"
              (click)="saveScenario()"
              [disabled]="isSaving() || !scenarioName()">
        @if (isSaving()) {
          <mat-spinner diameter="18"></mat-spinner>
        }
        {{ isSaving() ? 'Saving...' : 'Save' }}
      </button>
    </mat-card-actions>
  </mat-card>
}

<!-- Saved Scenarios Sidebar (if any exist) -->
@if (scenarios().length > 0) {
  <aside class="scenarios-sidebar">
    <h4>Saved Scenarios</h4>
    <div class="scenario-list">
      @for (scenario of scenarios(); track scenario.id) {
        <div class="scenario-item" (click)="loadScenario(scenario)">
          <span class="scenario-item__name">{{ scenario.name }}</span>
          <span class="scenario-item__date">{{ scenario.updatedAt | date:'shortDate' }}</span>
        </div>
      }
    </div>
  </aside>
}
