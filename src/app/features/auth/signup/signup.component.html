<div class="auth-page">
  <div class="auth-card card">
    <div class="auth-header">
      <h1>Create your account</h1>
      <p class="text-secondary">Start tracking your wealth with AusFinance</p>
    </div>

    @if (errorMessage()) {
      <div class="alert alert--error mb-md">
        {{ errorMessage() }}
      </div>
    }

    @if (successMessage()) {
      <div class="alert alert--success mb-md">
        {{ successMessage() }}
        <div class="mt-sm">
          <a routerLink="/auth/login" class="btn btn--primary btn--sm">Go to login</a>
        </div>
      </div>
    } @else {
      <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="email">Email address</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="you@example.com"
            autocomplete="email"
          >
          @if (email?.invalid && email?.touched) {
            <div class="form-error">
              @if (email?.errors?.['required']) {
                Email is required
              } @else if (email?.errors?.['email']) {
                Please enter a valid email address
              }
            </div>
          }
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <input
            type="password"
            id="password"
            formControlName="password"
            placeholder="Create a strong password"
            autocomplete="new-password"
          >
          @if (password?.invalid && password?.touched) {
            <div class="form-error">
              @if (password?.errors?.['required']) {
                Password is required
              } @else if (password?.errors?.['minlength']) {
                Password must be at least 8 characters
              } @else if (password?.errors?.['passwordStrength']) {
                Password must contain uppercase, lowercase, and a number
              }
            </div>
          }
          <div class="form-helper">
            Use at least 8 characters with uppercase, lowercase, and numbers
          </div>
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirm password</label>
          <input
            type="password"
            id="confirmPassword"
            formControlName="confirmPassword"
            placeholder="Confirm your password"
            autocomplete="new-password"
          >
          @if (confirmPassword?.touched && signupForm.errors?.['passwordMismatch']) {
            <div class="form-error">
              Passwords do not match
            </div>
          }
        </div>

        <div class="form-actions">
          <button
            type="submit"
            class="btn btn--primary btn--full"
            [disabled]="isSubmitting()"
          >
            @if (isSubmitting()) {
              Creating account...
            } @else {
              Create account
            }
          </button>
        </div>
      </form>

      <div class="auth-footer">
        <p>
          Already have an account?
          <a routerLink="/auth/login">Sign in</a>
        </p>
      </div>
    }
  </div>
</div>
