<div class="pricing">
  <div class="pricing__header">
    <h1 class="pricing__title">Simple, Transparent Pricing</h1>
    <p class="pricing__subtitle">
      Get access to all premium features with a single subscription.
      Cancel anytime.
    </p>
  </div>

  <div class="pricing__plans">
    <!-- Free Plan -->
    <div class="plan plan--free">
      <div class="plan__header">
        <h2 class="plan__name">Free</h2>
        <div class="plan__price">
          <span class="plan__amount">$0</span>
          <span class="plan__period">/forever</span>
        </div>
        <p class="plan__description">Try our calculators</p>
      </div>

      <ul class="plan__features">
        @for (feature of features; track feature.name) {
          <li class="plan__feature" [class.plan__feature--included]="feature.free">
            @if (feature.free) {
              <svg class="plan__icon plan__icon--check" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
            } @else {
              <svg class="plan__icon plan__icon--x" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
              </svg>
            }
            <span>{{ feature.name }}</span>
          </li>
        }
      </ul>

      <div class="plan__action">
        @if (isLoggedIn()) {
          <button class="btn btn--secondary" disabled>Current Plan</button>
        } @else {
          <a routerLink="/auth/signup" class="btn btn--secondary">Get Started</a>
        }
      </div>
    </div>

    <!-- Pro Monthly Plan -->
    <div class="plan plan--monthly">
      <div class="plan__header">
        <h2 class="plan__name">Pro Monthly</h2>
        <div class="plan__price">
          <span class="plan__amount">$9.99</span>
          <span class="plan__period">/month</span>
        </div>
        <p class="plan__description">Full access, flexible billing</p>
      </div>

      <ul class="plan__features">
        @for (feature of features; track feature.name) {
          <li class="plan__feature plan__feature--included">
            <svg class="plan__icon plan__icon--check" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
            </svg>
            <span>{{ feature.name }}</span>
          </li>
        }
      </ul>

      <div class="plan__action">
        @if (isPro()) {
          <button
            class="btn btn--secondary"
            (click)="manageSubscription()"
            [disabled]="isLoading()">
            {{ isLoading() ? 'Loading...' : 'Manage Subscription' }}
          </button>
        } @else {
          <button
            class="btn btn--secondary"
            (click)="subscribe('monthly')"
            [disabled]="isLoading()">
            {{ isLoading() ? 'Loading...' : 'Subscribe Monthly' }}
          </button>
        }
      </div>
    </div>

    <!-- Pro Yearly Plan -->
    <div class="plan plan--yearly">
      <div class="plan__badge">Best Value</div>

      <div class="plan__header">
        <h2 class="plan__name">Pro Yearly</h2>
        <div class="plan__price">
          <span class="plan__amount">$99.99</span>
          <span class="plan__period">/year</span>
          <span class="plan__savings">Save 17%</span>
        </div>
        <p class="plan__description">$8.33/month, billed annually</p>
      </div>

      <ul class="plan__features">
        @for (feature of features; track feature.name) {
          <li class="plan__feature plan__feature--included">
            <svg class="plan__icon plan__icon--check" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
            </svg>
            <span>{{ feature.name }}</span>
          </li>
        }
      </ul>

      <div class="plan__action">
        @if (isPro()) {
          <button
            class="btn btn--primary"
            (click)="manageSubscription()"
            [disabled]="isLoading()">
            {{ isLoading() ? 'Loading...' : 'Manage Subscription' }}
          </button>
        } @else {
          <button
            class="btn btn--primary"
            (click)="subscribe('yearly')"
            [disabled]="isLoading()">
            {{ isLoading() ? 'Loading...' : 'Subscribe Yearly' }}
          </button>
        }
      </div>
    </div>
  </div>

  <div class="pricing__footer">
    <p class="pricing__guarantee">
      <svg class="pricing__guarantee-icon" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
      </svg>
      30-day money-back guarantee. Cancel anytime with no questions asked.
    </p>

    <div class="pricing__faq">
      <h3>Frequently Asked Questions</h3>

      <div class="faq-item">
        <h4>Can I cancel anytime?</h4>
        <p>Yes! You can cancel your subscription at any time through the customer portal. You'll continue to have access until the end of your billing period.</p>
      </div>

      <div class="faq-item">
        <h4>What payment methods do you accept?</h4>
        <p>We accept all major credit cards, debit cards, and Apple Pay through our secure payment processor, Stripe.</p>
      </div>

      <div class="faq-item">
        <h4>Is my financial data secure?</h4>
        <p>Absolutely. We use bank-level encryption and never store your bank login credentials. Your data is yours and can be exported or deleted at any time.</p>
      </div>

      <div class="faq-item">
        <h4>Can I switch between monthly and yearly?</h4>
        <p>Yes! You can change your billing frequency anytime through the customer portal. Changes take effect at the start of your next billing period.</p>
      </div>
    </div>
  </div>
</div>
